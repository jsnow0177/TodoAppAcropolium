# Как запустить в первый раз

1. Клонировать репозиторий

2. Задать настройки в файле **.env**

3. Выполнить команду ```docker-compose build```

4. Выполнить команду ```docker-compose up -d```

    * Если выпали ошибки о том, что не удаётся там что-то сделать с портами -
    необходимо перезапустить докер. В винде это делается просто ПКМ на иконке
    в трее и затем выбор пункта меню "Restart". После того как докер перезапустится
    необходимо начать выполнение всех операций с пункта **4**.

6. Выполнить команду ```docker-compose exec php-fpm bash init-app.sh```.
Прежде чем выполнять эту команду, необходимо убедиться, что контейнер с базой данных
запущен.

7. Готово

# Запуск без docker

1. Клонировать репозиторий

2. Файлы из директории ***web*** загрузить на веб-сервер. Директория app/public
должна соответствовать корневой директории сервера.

3. Отредактировать файл ***app/phinx.yml***

4. Отредактировать файл ***app/todoapp.cfg.php***

5. Перейти в директорию с файлом ***init-app.sh*** и выполнить его
    
    1. Если нет возможности запустить ***init-app.sh***, необходимо выполнить
    следующую последовательность действий:
        1. В директории с файлами ***composer.json*** и ***composer.lock***
        выполнить ```composer install```
        
        2. В директории ***app*** выполнить ```../vendor/bin/phinx migrate```

6. Готово

# Файл .env

* Переменная **WEBSERVER_PORT** используется для указания порта по которому
будет доступен Nginx на хост-машине.

* Переменная **APP_DBHOST** отвечает за адрес хоста базы данных и должна соответствовать
названию сервиса с базой данных.

* Переменная **APP_DBNAME** используется для указания имени базы данных для приложения.
При первом запуске создаётся база с таким именем.

* Переменная **APP_DBUSER** используется для указания имени пользователя базы данных
для приложения. При первом запуске будет создан пользователь с таким именем.

* Переменная **APP_DBPASS** используется для указания пароля пользователя базы данных
приложения. При первом запуске будет создан пользователь **APP_DBUSER** с паролем
**APP_DBPASS**.